FROM alpine:3.18

WORKDIR /app

# 安装运行时依赖
RUN apk --no-cache add ca-certificates tzdata curl sqlite

# 复制编译好的应用
COPY backend/h-cloud-server .
COPY backend/configs ./configs
COPY backend/public ./public

# 设置权限
RUN chmod +x h-cloud-server

# 暴露端口
EXPOSE 8080

# 启动应用
CMD ["./h-cloud-server"]